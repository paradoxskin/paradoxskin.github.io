<!DOCTYPE html>
<html id="all">

<head>
	<meta charset="utf-8">

















<link rel="shortcut icon" href="/pic/favicon.ico">
	<title>Paradoxless | Blogs</title>
	
<link rel="stylesheet" href="/css/main.css">

	
<link rel="stylesheet" href="/css/font.css">

	
<link rel="stylesheet" href="/lib/highlight/rainbow.min.css">

<meta name="generator" content="Hexo 5.4.2"></head>
	
<script src="/lib/highlight/highlight.min.js"></script>

	
<script src="/lib/highlight/highlightjs-line-numbers.js"></script>

	
<script src="/lib/jquery.js"></script>

	
<script src="/lib/jquery.pjax.js"></script>

	
<script src="/js/main.js"></script>

<body id="lybody">
	<div id="head">
	<a id="pLogo" href="/"><img alt="P" src="/pic/logo.svg"></a>
	<div id="urlText">aradoxskin.</div>
	<a id="githubLogo" href="https://github.com/paradoxskin" target="_blank"><img alt="github" src="/pic/github.svg"></a>
	<div id="urlText">.io</div>
	<div id="sucklessText">- simple is best</div>
	<div id="clear"></div>
</div>

	<hr id="hidden">
	<script>
	//if(localStorage.getItem('bgs')==null){
		localStorage['bgs']='comp'

			localStorage.setItem('bgs[num]','25');

			localStorage.setItem('bgs[pic1]','/pic/wp/01.jpg');

			localStorage.setItem('bgs[pic2]','/pic/wp/02.jpg');

			localStorage.setItem('bgs[pic3]','/pic/wp/03.jpg');

			localStorage.setItem('bgs[pic4]','/pic/wp/04.jpg');

			localStorage.setItem('bgs[pic5]','/pic/wp/05.jpg');

			localStorage.setItem('bgs[pic6]','/pic/wp/06.jpg');

			localStorage.setItem('bgs[pic7]','/pic/wp/07.jpg');

			localStorage.setItem('bgs[pic8]','/pic/wp/08.jpg');

			localStorage.setItem('bgs[pic9]','/pic/wp/09.jpg');

			localStorage.setItem('bgs[pic10]','/pic/wp/10.jpg');

			localStorage.setItem('bgs[pic11]','/pic/wp/11.jpg');

			localStorage.setItem('bgs[pic12]','/pic/wp/12.jpg');

			localStorage.setItem('bgs[pic13]','/pic/wp/13.png');

			localStorage.setItem('bgs[pic14]','/pic/wp/14.png');

			localStorage.setItem('bgs[pic15]','/pic/wp/15.png');

			localStorage.setItem('bgs[pic16]','/pic/wp/16.jpg');

			localStorage.setItem('bgs[pic17]','/pic/wp/17.jpg');

			localStorage.setItem('bgs[pic18]','/pic/wp/18.jpg');

			localStorage.setItem('bgs[pic19]','/pic/wp/19.jpg');

			localStorage.setItem('bgs[pic20]','/pic/wp/20.jpg');

			localStorage.setItem('bgs[pic21]','/pic/wp/21.png');

			localStorage.setItem('bgs[pic22]','/pic/wp/22.jpg');

			localStorage.setItem('bgs[pic23]','/pic/wp/23.png');

			localStorage.setItem('bgs[pic24]','/pic/wp/24.jpg');

			localStorage.setItem('bgs[pic25]','/pic/wp/25.jpg');

		if(localStorage.getItem('now')==null){
			localStorage.setItem('now','pic22');
		}
	//}
</script>

<div id="nav">
	<ul>
		<li><button id="cgBg" onclick="randomSwitch()">O</button><button id="clBg" onclick="noBg()">_</button></li>

		<iframe id="music-player" frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=110 src="//music.163.com/outchain/player?type=0&id=7669623816&auto=0&height=90"></iframe>

		<button id="nav-hide" onclick="hideMenu()">â—¤</button>

		<span id="clear"></span>
	</ul>
</div>
<button id="nav-show" onclick="showMenu()">â—¢</button>

<span id="pup">
	<div id="menu">
	
	
		
			<b><a href="/" class="menu-item-link" id="in">Home</a></b>
		
	
		
			<b><a data-pjax="#main" href="/blogs" class="menu-item-link-selected" id="in">Blogs</a></b>
		
	
		
			<b><a href="/archives" class="menu-item-link" id="in">Archives</a></b>
		
	
		
			<b><a href="/about" class="menu-item-link" id="in">who@mi</a></b>
		
	
		
			<b><a href="/links" class="menu-item-link" id="in">Links</a></b>
		
	
	<div id="outlink">
	
		<a href="https://www.lexaloffle.com/pico-8.php" class="menu-item-link" id="out" target="_blank">pico-8</a>
	
		<a href="https://suckless.org/" class="menu-item-link" id="out" target="_blank">suckless</a>
	
	</div>
</div>

	<div id="main">
		<div id="post">

	<b><div id="start-title">go ä½¿ç”¨ sqlite3</div></b>

	
	<center><b><span id="start-date">start at 2023/01/28.</span></b></center>
	

    <h2 id="å®‰è£…-sqlite3"><a href="#å®‰è£…-sqlite3" class="headerlink" title="å®‰è£… sqlite3"></a>å®‰è£… sqlite3</h2><blockquote>
<p>åœ¨ arch æºé‡Œï¼Œmysql è¢«æ›¿æ¢æˆäº† mariadbï¼Œæ²¡åŠ›æ°”æŠ˜è…¾äº†<span id="more"></span>ï¼Œä¹Ÿä¸æƒ³æ±¡æŸ“ manjaro çš„ç¯å¢ƒï¼Œæ‰€ä»¥åœ¨ windows ä¸Šè£…äº† mysql æ¥è¿œç¨‹è¿æ¥ï¼Œä½†æ˜¯è¿œç¨‹è¿æ¥çš„é€Ÿåº¦æ…¢çš„æ„Ÿäººï¼Œå› ä¸ºè¦åšç®¡ç†ä¿¡æ¯ç³»ç»Ÿçš„å®è·µè¯¾ä½œä¸šï¼Œæˆ‘æ—¢ä¸æƒ³æ‹¿ä¸¤å°ç”µè„‘å»ï¼Œä¹Ÿä¸æƒ³åœ¨ manjaro ä¸Šè£…ä¸€ä¸ªåå¤§çš„æ•°æ®åº“æ¥è€—ç”µï¼Œæœ€åæˆ‘è§‰å¾—åº”è¯¥è¯•ä¸€ä¸‹æ˜¯æœ€è½»é‡çš„ sqlite3</p>
</blockquote>
<p>one line</p>
<pre><code class="bash">$ sudo pacman -S sqlite3
</code></pre>
<h2 id="ä½¿ç”¨-sqlite3"><a href="#ä½¿ç”¨-sqlite3" class="headerlink" title="ä½¿ç”¨ sqlite3"></a>ä½¿ç”¨ sqlite3</h2><blockquote>
<p>å’Œå…¶ä»–å…³ç³»å‹æ•°æ®åº“ä¸åŒçš„æ˜¯ï¼ŒSQLiteæ²¡æœ‰å•ç‹¬çš„æœåŠ¡å™¨è¿›ç¨‹ï¼Œä»¥ä¾›å®¢æˆ·ç«¯ç¨‹åºè®¿é—®å¹¶æä¾›ç›¸å…³çš„æœåŠ¡ã€‚SQLiteä½œä¸ºä¸€ç§åµŒå…¥å¼æ•°æ®åº“ï¼Œå…¶è¿è¡Œç¯å¢ƒä¸ä¸»ç¨‹åºä½äºåŒä¸€è¿›ç¨‹ç©ºé—´ï¼Œå› æ­¤å®ƒä»¬ä¹‹é—´çš„é€šä¿¡å®Œå…¨æ˜¯è¿›ç¨‹å†…é€šä¿¡ï¼Œè€Œç›¸æ¯”äºè¿›ç¨‹é—´é€šä¿¡ï¼Œå…¶æ•ˆç‡æ›´é«˜ã€‚ç„¶è€Œéœ€è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯ï¼Œè¯¥ç§ç»“æ„åœ¨å®é™…è¿è¡Œæ—¶ç¡®å®å­˜åœ¨ä¿æŠ¤æ€§è¾ƒå·®çš„é—®é¢˜ï¼Œæ¯”å¦‚æ­¤æ—¶ï¼Œåº”ç”¨ç¨‹åºå‡ºç°é—®é¢˜å¯¼è‡´è¿›ç¨‹å´©æºƒï¼Œç”±äºSQLiteä¸å…¶æ‰€ä¾èµ–çš„è¿›ç¨‹ä½äºåŒä¸€è¿›ç¨‹ç©ºé—´ï¼Œé‚£ä¹ˆæ­¤æ—¶SQLiteä¹Ÿå°†éšä¹‹é€€å‡ºã€‚ä½†æ˜¯å¯¹äºç‹¬ç«‹çš„æœåŠ¡å™¨è¿›ç¨‹ï¼Œåˆ™ä¸ä¼šæœ‰æ­¤é—®é¢˜ï¼Œå®ƒä»¬å°†åœ¨å¯†é—­æ€§æ›´å¥½çš„ç¯å¢ƒä¸‹å®Œæˆå®ƒä»¬çš„å·¥ä½œã€‚</p>
</blockquote>
<p>å®‰è£…å®Œä¹‹åï¼Œåœ¨å‘½ä»¤è¡Œç›´æ¥è¾“å…¥ <code>sqlite3</code> å°±èƒ½è¿›å…¥ sqlite çš„ç•Œé¢äº†ï¼Œsqlite3 çš„å‘½ä»¤éƒ½æ˜¯ç”¨ <code>.</code> å¼€å¤´ï¼Œè¯¦è§ <code>.help</code> ï¼Œä¸‹æ–‡å¹¶ä¸ä¼šå¯¹å‘½ä»¤åšè¯¦ç»†ä»‹ç»ï¼Œæˆ‘è®¤ä¸ºæ²¡å¿…è¦å»è®°ä½ï¼Œç”¨çš„æ—¶å€™æŸ¥ä¸€ä¸‹è¡¨å°±è¡Œäº†ï¼Œåªè¦æŒæ¡å‡ ä¸ªå¸¸ç”¨çš„æŒ‡ä»¤å°±è¡Œ</p>
<p><strong>åˆ›å»ºæ•°æ®åº“</strong></p>
<p>åœ¨è¿›å…¥ sqlite ç•Œé¢å‰å¯ä»¥æŒ‡å®šä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ï¼Œå¦‚æœè¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨çš„è¯ï¼Œè¿›å…¥ç•Œé¢ä¹‹åè¾“å…¥ <code>.database</code> ä¼šä¿å­˜åˆ°æœ¬åœ°ï¼Œä¹‹åä½¿ç”¨ <code>.quit</code> é€€å‡º sqlite ç•Œé¢æŸ¥çœ‹</p>
<pre><code class="bash">$ sqlite3 test1.db
SQLite version 3.40.0 2022-11-16 12:10:08
Enter &quot;.help&quot; for usage hints.
sqlite&gt; .database
main: /home/paradox/workspace/go/src/trysqlite3/test1.db r/w
sqlite&gt; .quit
$ ls
test1.db
</code></pre>
<p>ä¹Ÿå¯ä»¥åœ¨è¿›å…¥ sqlite åï¼Œç”¨ <code>.open</code> è¿›è¡Œç­‰ä»·çš„æ“ä½œï¼Œä½†è¿™æ—¶å€™ä¸éœ€è¦ <code>.database</code> å°±èƒ½ä¿å­˜åˆ°æœ¬åœ°</p>
<pre><code class="bash">$ sqlite3
SQLite version 3.40.0 2022-11-16 12:10:08
Enter &quot;.help&quot; for usage hints.
Connected to a transient in-memory database.
Use &quot;.open FILENAME&quot; to reopen on a persistent database.
sqlite&gt; .open test.db
sqlite&gt; .quit
$ ls
test.db
</code></pre>
<h2 id="gorm-è¿æ¥"><a href="#gorm-è¿æ¥" class="headerlink" title="gorm è¿æ¥"></a>gorm è¿æ¥</h2><p><a target="_blank" rel="noopener" href="https://gorm.io/zh_CN/docs/connecting_to_the_database.html#SQLite">ğŸ”—</a> gorm çš„å®˜æ–¹æ–‡æ¡£æœ‰æ¼”ç¤ºï¼Œç”±äº sqlite æ˜¯åŸºäºæ–‡ä»¶çš„ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦ä¸€å †å¤æ‚çš„è¿æ¥å‚æ•°</p>
<pre><code class="go">package main
import (
    &quot;gorm.io/gorm&quot;
    &quot;gorm.io/driver/sqlite&quot;
)

func main() &#123;
    db, err := gorm.Open(sqlite.Open(&quot;test.db&quot;), &amp;gorm.Config&#123;&#125;)
&#125;
</code></pre>
<p><strong>æµ‹è¯•å»ºè¡¨</strong></p>
<p>è¿™é‡Œä½¿ç”¨ gorm çš„ <code>AutoMigrate</code> æ–¹æ³•</p>
<pre><code class="go">type File struct &#123;
    Id int
    Filename string
    CreateDate time.Time
&#125;

func main() &#123;
    db, _ := gorm.Open(sqlite.Open(&quot;test.db&quot;), &amp;gorm.Cofing&#123;&#125;)
    db.AutoMigrate(&amp;File&#123;&#125;)
&#125;
</code></pre>
<p><code>.table</code> æŸ¥çœ‹æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ï¼Œ<code>.schema</code> æŸ¥çœ‹æŒ‡å®šè¡¨çš„å­—æ®µ</p>
<pre><code class="bash">$ sqlite3 test.db
SQLite version 3.40.0 2022-11-16 12:10:08
Enter &quot;.help&quot; for usage hints.
sqlite&gt; .tables
files
sqlite&gt; .schema files
CREATE TABLE `files` (`id` integer,`filename` text,`create_date` datetime,PRIMARY KEY (`id`));
</code></pre>
<p>æ²¡é—®é¢˜ï¼Œé‚£ gorm çš„å…¶ä»–æ–¹æ³•åº”è¯¥éƒ½èƒ½ç”¨äº†</p>
<p>æœ€åæ¥æµ‹è¯•ä¸€ä¸‹å¢å°±ç»“æŸå§</p>
<pre><code class="go">db.Create(&amp;File&#123;Filename: &quot;nice&quot;, CreateData: time.Now()&#125;)
</code></pre>
<p>æ•°æ®åº“å½“ç„¶æ”¯æŒ sql è¯­å¥ï¼Œæˆ‘ä»¬æ¥æŸ¥çœ‹è¡¨</p>
<pre><code class="bash">sqlite&gt; select * from files;
1|nice|2023-01-28 21:14:31.440692473+08:00|
</code></pre>
<p>å…¶ä¸­ id æ˜¯è‡ªå¢ä¸»é”®ï¼Œæ‰€ä»¥èƒ½è‡ªåŠ ï¼Œå¯ä»¥çœ‹åˆ°éå¸¸å®Œç¾ï¼Œæˆ‘ç›¸ä¿¡ sqlite ä¸€å®šéå¸¸å¥½ç”¨</p>
<p>ä¹‹åå¯èƒ½ä¼šé‡åˆ°å‘ï¼Œåšå¥½å¿ƒç†å‡†å¤‡</p>
<blockquote>
<p>è²Œä¼¼åå°è¦å¼€ä¸€ä¸ª <code>sqlite3 test.db</code> æ‰èƒ½å“åº”ï¼Œä¸ç„¶ orm ä¼šé˜»å¡</p>
<p>è¯´å®è¯ï¼Œæ‡’äººçš„ orm è®©æˆ‘æœ‰ç‚¹ä¸èˆ’æœï¼Œä¸‹å­¦æœŸè¿˜æ˜¯è¦ç³»ç»Ÿæ€§å­¦ä¹ ä¸€ä¸‹ sql è¯­å¥å•Šï¼Œä¸€æ–¹é¢ä¸ºäº†çµæ´»ï¼Œå¦ä¸€æ–¹é¢é¢è¯•è‚¯å®šè¿˜è¦ç”¨å•Š â€¦</p>
</blockquote>


	<b><span id="post-date">2023/01/28</span></b>
	<div id="tags">
		<ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag"># go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag"># åç«¯</a></li></ul>
	</div>

	<div id="clear"></div>
</div>
<center><a class="gobk" href="javascript:;" onclick="Gobk()">&gt CLICK TO back &lt</a><center>
<div id="cart">
	<button id="cart-hide" onclick="cartCg()">â—€</button>
</div>
<script>
	if(history.state==null){
		var tmpa=document.getElementsByClassName("gobk")[0];
		tmpa.innerHTML="> CLICK TO land <";
	}
	showAIndex();
</script>

	</div>
	<script>
		hljs.highlightAll();
		hljs.initLineNumbersOnLoad();
	</script>
</span>
	<hr id="hidden">
	

	<script>
		hljs.highlightAll();
		hljs.initLineNumbersOnLoad();
		initBg();
		$(document).pjax('a','#pup',{fragment:'#pup',timeout: 8000});
	</script>
</body>
</html>
