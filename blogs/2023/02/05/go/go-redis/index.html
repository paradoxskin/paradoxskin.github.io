<!DOCTYPE html>
<html id="all">

<head>
	<meta charset="utf-8">

















<link rel="shortcut icon" href="/pic/favicon.ico">
	<title>Paradoxless | Blogs</title>
	
<link rel="stylesheet" href="/css/main.css">

	
<link rel="stylesheet" href="/css/font.css">

	
<link rel="stylesheet" href="/lib/highlight/rainbow.min.css">

<meta name="generator" content="Hexo 6.3.0"></head>
	
<script src="/lib/highlight/highlight.min.js"></script>

	
<script src="/lib/highlight/highlightjs-line-numbers.js"></script>

	
<script src="/lib/jquery.js"></script>

	
<script src="/lib/jquery.pjax.js"></script>

	
<script src="/js/main.js"></script>

<body id="lybody">
	<div id="head">
	<a id="pLogo" href="/"><img alt="P" src="/pic/logo.svg"></a>
	<div id="urlText">aradoxskin.</div>
	<a id="githubLogo" href="https://github.com/paradoxskin" target="_blank"><img alt="github" src="/pic/github.svg"></a>
	<div id="urlText">.io</div>
	<div id="sucklessText">- simple is best</div>
	<div id="clear"></div>
</div>

	<hr id="hidden">
	<script>
	//if(localStorage.getItem('bgs')==null){
		localStorage['bgs']='comp'

			localStorage.setItem('bgs[num]','25');

			localStorage.setItem('bgs[pic1]','/pic/wp/01.jpg');

			localStorage.setItem('bgs[pic2]','/pic/wp/02.jpg');

			localStorage.setItem('bgs[pic3]','/pic/wp/03.jpg');

			localStorage.setItem('bgs[pic4]','/pic/wp/04.jpg');

			localStorage.setItem('bgs[pic5]','/pic/wp/05.jpg');

			localStorage.setItem('bgs[pic6]','/pic/wp/06.jpg');

			localStorage.setItem('bgs[pic7]','/pic/wp/07.jpg');

			localStorage.setItem('bgs[pic8]','/pic/wp/08.jpg');

			localStorage.setItem('bgs[pic9]','/pic/wp/09.jpg');

			localStorage.setItem('bgs[pic10]','/pic/wp/10.jpg');

			localStorage.setItem('bgs[pic11]','/pic/wp/11.jpg');

			localStorage.setItem('bgs[pic12]','/pic/wp/12.jpg');

			localStorage.setItem('bgs[pic13]','/pic/wp/13.png');

			localStorage.setItem('bgs[pic14]','/pic/wp/14.png');

			localStorage.setItem('bgs[pic15]','/pic/wp/15.png');

			localStorage.setItem('bgs[pic16]','/pic/wp/16.jpg');

			localStorage.setItem('bgs[pic17]','/pic/wp/17.jpg');

			localStorage.setItem('bgs[pic18]','/pic/wp/18.jpg');

			localStorage.setItem('bgs[pic19]','/pic/wp/19.jpg');

			localStorage.setItem('bgs[pic20]','/pic/wp/20.jpg');

			localStorage.setItem('bgs[pic21]','/pic/wp/21.png');

			localStorage.setItem('bgs[pic22]','/pic/wp/22.jpg');

			localStorage.setItem('bgs[pic23]','/pic/wp/23.png');

			localStorage.setItem('bgs[pic24]','/pic/wp/24.jpg');

			localStorage.setItem('bgs[pic25]','/pic/wp/25.jpg');

		if(localStorage.getItem('now')==null){
			localStorage.setItem('now','pic22');
		}
	//}
</script>

<div id="nav">
	<ul>
		<li><button id="cgBg" onclick="randomSwitch()">O</button><button id="clBg" onclick="noBg()">_</button></li>

		<iframe id="music-player" frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=110 src="//music.163.com/outchain/player?type=0&id=7669623816&auto=0&height=90"></iframe>

		<button id="nav-hide" onclick="hideMenu()">â—¤</button>

		<span id="clear"></span>
	</ul>
</div>
<button id="nav-show" onclick="showMenu()">â—¢</button>

<span id="pup">
	<div id="menu">
	
	
		
			<b><a href="/" class="menu-item-link" id="in">Home</a></b>
		
	
		
			<b><a data-pjax="#main" href="/blogs" class="menu-item-link-selected" id="in">Blogs</a></b>
		
	
		
			<b><a href="/archives" class="menu-item-link" id="in">Archives</a></b>
		
	
		
			<b><a href="/about" class="menu-item-link" id="in">who@mi</a></b>
		
	
		
			<b><a href="/links" class="menu-item-link" id="in">Links</a></b>
		
	
	<div id="outlink">
	
		<a href="https://www.lexaloffle.com/pico-8.php" class="menu-item-link" id="out" target="_blank">pico-8</a>
	
		<a href="https://suckless.org/" class="menu-item-link" id="out" target="_blank">suckless</a>
	
	</div>
</div>

	<div id="main">
		<div id="post">

	<b><div id="start-title">go-redis çš„ä½¿ç”¨</div></b>

	
	<center><b><span id="start-date">start at 2023/02/02.</span></b></center>
	

    <h2 id="redis-çš„å®‰è£…"><a href="#redis-çš„å®‰è£…" class="headerlink" title="redis çš„å®‰è£…"></a>redis çš„å®‰è£…</h2><blockquote>
<p>é¡¹ç›®è¦ç”¨ï¼Œæˆ‘å°±ç®€å•åœ°å­¦ä¸€ä¸‹å§ï¼Œè‚¯å®šæ˜¯æ— æ³•å®Œå…¨æŒæ¡çš„</p>
<p>redis æ˜¯æ•°æ®åº“å› ä¸ºè®¿é—®é‡è¿‡å¤§è€Œå¯¼è‡´ç³»ç»Ÿç˜«ç—ªæ—¶æœ‰ç¨‹åºå‘˜æƒ³å‡ºçš„ç¼“å­˜ç­–ç•¥ï¼Œæœ¬è´¨å°±æ˜¯ä¸€å—å­˜å‚¨é”®å€¼å¯¹çš„å†…å­˜ç©ºé—´ï¼Œæœ‰ä¸°å¯Œçš„ç»éªŒæ¥å†³ç­–å¦‚ä½•å¤„ç†æŸä¸ªé”®å€¼å¯¹ï¼Œèƒ½å¤Ÿåœ¨å¤§æµé‡çš„æƒ…å†µä¸‹å¸®æ•°æ®åº“æŠ—ä½å‹åŠ›</p>
<p>ï¼ˆä½†æ˜¯<span id="more"></span>è¿™ä¸ªé¡¹ç›®çœŸçš„éœ€è¦æŠ—å‹å—ï¼Ÿ</p>
</blockquote>
<pre><code class="bash">$ pacman -S redis
</code></pre>
<h2 id="redis-çš„ä½¿ç”¨"><a href="#redis-çš„ä½¿ç”¨" class="headerlink" title="redis çš„ä½¿ç”¨"></a>redis çš„ä½¿ç”¨</h2><pre><code class="bash"># å¯åŠ¨redisæœåŠ¡
$ sudo systemctl start redis
# å¼€æœºè‡ªå¯åŠ¨redisæœåŠ¡
$ sudo systemctl enable redis
# æŸ¥çœ‹redisçŠ¶æ€
$ systemctl status redis
# è¿›å…¥cliäº¤äº’æ¨¡å¼
$ redis-cli
# pingä¸€ä¸‹redisæœåŠ¡æ˜¯å¦å¯åŠ¨
&gt; ping
PONG
# è·å–æ‰€æœ‰é”®å
&gt; keys *
# è·å–é”®çš„å€¼
&gt; get keyname
value
</code></pre>
<h2 id="go-redis"><a href="#go-redis" class="headerlink" title="go-redis"></a>go-redis</h2><blockquote>
<p>go-redis æ˜¯ä¸€ä¸ªå¼€æºä¾èµ–ï¼Œç”¨äº golang å’Œ redis ä¹‹é—´çš„äº¤äº’</p>
</blockquote>
<p>ä¸‹é¢æ˜¯æœ€ç®€å•çš„ string å­˜å‚¨</p>
<pre><code class="go">package main

import (
    &quot;github.com/redis/go-redis/v9&quot;
    &quot;context&quot;
    &quot;fmt&quot;
)

var client *redis.Client
var ctx context.Context

func init() &#123;
    ctx = context.Background()
    client = redis.NewClient(&amp;redis.Options&#123;
        Addr: &quot;127.0.0.1:6379&quot;,
        Password: &quot;&quot;,
        DB: 0,
    &#125;)
&#125;
func main() &#123;
    a, err := client.Set(ctx, &quot;name&quot;, &quot;hello&quot;, 0).Result()
    if err != nil &#123;
        fmt.Println(err)
    &#125;
    fmt.Println(a)
&#125;
</code></pre>
<p>æ¥çœ‹çœ‹ cli äº¤äº’ç»“æœ</p>
<pre><code class="bash">127.0.0.1:6379&gt; keys *
1) &quot;name&quot;
127.0.0.1:6379&gt; get name
&quot;hello&quot;
</code></pre>
<p>å®Œç¾ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å– string</p>
<pre><code class="go">func main() &#123;
    //a, err := client.Set(ctx, &quot;name&quot;, &quot;hello&quot;, 0).Result()
    a, err := client.Get(ctx, &quot;name&quot;).Result()
    if err != nil &#123;
        fmt.Println(err)
    &#125;
    fmt.Println(a)
&#125;
</code></pre>
<p>å‘½ä»¤è¡Œè¾“å‡ºäº† <code>hello</code></p>
<p>redis æœ‰äº”å¤§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ String, Hash, List, Set, Sorted Set</p>
<p>ä¸Šé¢åªè¯´äº† Stringï¼Œè‚¯å®šæ²¡æ³•æ»¡è¶³å¤§éƒ¨åˆ†æ—¥å¸¸éœ€æ±‚ï¼Œå¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„ç±»å‹å°±æ˜¯ Hashï¼Œä¸ String ä¸åŒï¼ŒHash çš„ key å¯¹åº”çš„ value æ˜¯ä¸€å¼  Hash è¡¨ï¼Œç›¸å½“äºç¬¬äºŒç»´åº¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ keyï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å­—æ®µï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯å¯¹åº”çš„value</p>
<pre><code class="go">func main() &#123;
    a, err := client.HSet(ctx, &quot;int&quot;, &quot;hello&quot;, 233).Result()
    b, err := client.HGet(ctx, &quot;int&quot;, &quot;hello&quot;).Result()
    if err != nil &#123;
        fmt.Println(err)
    &#125;
    fmt.Println(a)
    fmt.Println(b)
&#125;
</code></pre>
<p>æ²¡é”™ï¼Œä½ ä¸€å®šæƒ³åˆ°äº†è¿™æ · set å¤ªæ…¢äº†å¯¹å§ï¼Œgo-redis è¿˜æä¾›æ‰¹é‡ <code>HMSet</code> æ–¹æ³•æ‰¹é‡ setï¼Œå’Œèƒ½è·å–å…¨éƒ¨å…ƒç´ çš„ <code>HGetAll</code> æ–¹æ³•</p>
<pre><code class="bash">func main() &#123;
    a, err := client.HMSet(ctx, &quot;bigDataBase&quot;, map[string]interface&#123;&#125;&#123;
        &quot;name&quot;: &quot;hello&quot;,
        &quot;Password&quot;: &quot;password&quot;,
        &quot;luck&quot;: 8,
    &#125;).Result()
    b, err := client.HGetAll(ctx, &quot;int&quot;).Result()
    if err != nil &#123;
        fmt.Println(err)
    &#125;
    fmt.Println(a)
    fmt.Println(b)
&#125;
</code></pre>
<p>ä½†æ˜¯æ³¨æ„ï¼Œè¿”å›çš„æ˜¯ <code>map[string]string</code>ï¼Œæ‰€ä»¥å®é™…ä½¿ç”¨ä¸­å¯èƒ½è¿˜éœ€è¦å–å‡ºæ¥ä¹‹åè½¬æ¢ç±»å‹</p>
<blockquote>
<p>æˆ‘æ˜¯çœŸçš„ä¸æƒ³å­¦ä¸€å †å·¥å…·ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ä¸€å †ç¢ç‰‡ä¸€æ ·çš„ä¸œè¥¿æ¥æ„æˆé¡¹ç›®ï¼Œéå¸¸çš„ä¸ sucklessï¼Œå¦‚æœèƒ½åªå®Œæˆç®€å•çš„åŸºç¡€åŠŸèƒ½ä¹‹åä¸Šçº¿ä¹‹åæ…¢æ…¢æ”¹ä¸œè¥¿æ¥ä¼˜åŒ–è¿™ä¸ªç¨‹åºå¤šå¥½ï¼Œéè¦åœ¨ä¸€å¼€å§‹å°±åŠ å¤§åˆ«äººçš„å­¦ä¹ æˆæœ¬ï¼Œæˆ‘å¸Œæœ›çš„æ˜¯å­¦ç²¾ï¼Œè€Œä¸æ˜¯å­¦çš„æ‚å’Œå¹¿ï¼Œè¿™æ ·å›«å›µåæ£åœ°å­¦ä¹ ä¸€éæˆ‘è§‰å¾—æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œè™½ç„¶æœªæ¥ç¡®å®éœ€è¦æŒæ¡è¿™é—¨æŠ€æœ¯ï¼Œä½†æ˜¯ä¸æƒ³ç°é˜¶æ®µå»æŒæ¡ï¼</p>
<p>å¯èƒ½åªæ˜¯æˆ‘çš„æƒ³æ³•æ¯”è¾ƒä¸åŒï¼Œæˆ‘æ˜¯ä¸€ä¸ªå–œæ¬¢é€ è½®å­çš„äººï¼Œæœ‰äº›åŠŸèƒ½å¯ä»¥è‡ªå·±å®ç°å°±å¾ˆä¸æƒ³ä¾é åˆ«äººçš„è½®å­ï¼ŒçŸ¥é“åˆ«äººè½®å­çš„åŸç†æˆ‘ä¹Ÿæƒ³è‡ªå·±é€ é€ çœ‹ï¼Œåªèƒ½è¯´çŸ¥éŸ³éš¾å¯»ï¼Œå¼€æºç¤¾åŒºç¡®å®éƒ½æ˜¯å’Œæˆ‘å¿—åŒé“åˆçš„äººï¼Œä½†è‡ªå·±ç¡®å®ä¹Ÿæ²¡å­¦ä¼šä»€ä¹ˆçœŸæœ¬äº‹ï¼Œè®©åˆ«äººå°Šé‡ï¼Œæ— å¥ˆã€‚ç°åœ¨æ„Ÿè§‰åç«¯å…¶å®å°±æ˜¯ä¸ªæ‹§èºä¸çš„ï¼ŒæŒæ¡ä¸€å †å·¥å…·ä¹‹åï¼Œæ›´åŠ ç†Ÿç»ƒåœ°æ‹§èºä¸ï¼Œæœ‰è¶£ç¨‹åº¦å¯èƒ½è¿˜ä¸å¦‚å‰ç«¯ï¼ˆï¼Ÿ</p>
</blockquote>
<blockquote>
<p>ä¸è¿‡æˆ‘æ‰¿è®¤ï¼Œè‡ªå·±ç°åœ¨æ˜¯æŠŠç¼–ç¨‹å½“ä½œä¸€é—¨å…´è¶£ï¼Œä½†ä¸ºçš„æ˜¯ä»¥åçš„å·¥ä½œï¼Œå½“å…´è¶£æˆä¸ºå·¥ä½œæ—¶ï¼Œå¿…ç„¶ä¼šè®©äººæ²®ä¸§ï¼Œç°åœ¨è¿˜æ˜¯èµ°ä¸€æ­¥çœ‹ä¸€æ­¥å§ï¼Œæ— æ‰€è°“ï¼Œæˆ‘ä¼šå…¥é’³æ•™ ğŸ˜ˆ</p>
<p>æˆ‘åˆ°åº•æƒ³å¹²ä»€ä¹ˆå‘¢ï¼Œå¯èƒ½æ˜¯å†™æ¸¸æˆå§ï¼Œä½†æ˜¯ç›´è§‰å‘Šè¯‰æˆ‘ï¼Œç°åœ¨è¿˜æ²¡åˆ°é‚£ä¸ªæ—¶é—´</p>
</blockquote>
<blockquote>
<p>2.5 æ›´æ–°ï¼š</p>
<p>å…¶å®ä¹Ÿå°±é‚£æ ·å§ï¼Œèƒ½ç”¨èµ·æ¥ä¹‹åè¿˜æ˜¯æŒºå¼€å¿ƒçš„ï¼Œåˆä¸æ˜¯è®©æˆ‘å»å­¦åº•å±‚å®ç°ï¼Œæˆ‘åªéœ€è¦ä¼šç”¨ä»–ä»¬æä¾›ç»™æˆ‘çš„å‡½æ•°å°±è¡Œäº†ï¼Œç¼–ç¨‹å°±è¿™ä¹ˆå›äº‹ï¼Œè¦è¯´éš¾åº¦è‚¯å®šæ˜¯æ¯”ä¸ä¸Šç®—æ³•çš„ï¼Œå­¦æ–°ä¸œè¥¿æ²¡ä»€ä¹ˆéš¾çš„ï¼</p>
</blockquote>


	<b><span id="post-date">2023/02/05</span></b>
	<div id="tags">
		<ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag"># go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag"># åç«¯</a></li></ul>
	</div>

	<div id="clear"></div>
</div>
<center><a class="gobk" href="javascript:;" onclick="Gobk()">&gt CLICK TO back &lt</a><center>
<div id="cart">
	<button id="cart-hide" onclick="cartCg()">â—€</button>
</div>
<script>
	if(history.state==null){
		var tmpa=document.getElementsByClassName("gobk")[0];
		tmpa.innerHTML="> CLICK TO land <";
	}
	showAIndex();
</script>

	</div>
	<script>
		hljs.highlightAll();
		hljs.initLineNumbersOnLoad();
	</script>
</span>
	<hr id="hidden">
	

	<script>
		hljs.highlightAll();
		hljs.initLineNumbersOnLoad();
		initBg();
		$(document).pjax('a','#pup',{fragment:'#pup',timeout: 8000});
	</script>
</body>
</html>
