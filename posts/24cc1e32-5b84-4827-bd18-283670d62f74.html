<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>go-redis çš„ä½¿ç”¨</title>
    <link rel="stylesheet" href="/res/css/style.css">
</head>
<body>
<nav class="main-nav">
  <ul>
    <li><a href="/blog">blog</a></li>
    <li><a href="/archive">archive</a></li>
    <li><a href="/rss">rss</a></li>
  </ul>
</nav>
<h2>redis çš„å®‰è£…</h2>
<blockquote>
<p>é¡¹ç›®è¦ç”¨ï¼Œæˆ‘å°±ç®€å•åœ°å­¦ä¸€ä¸‹å§ï¼Œè‚¯å®šæ˜¯æ— æ³•å®Œå…¨æŒæ¡çš„</p>
<p>redis æ˜¯æ•°æ®åº“å› ä¸ºè®¿é—®é‡è¿‡å¤§è€Œå¯¼è‡´ç³»ç»Ÿç˜«ç—ªæ—¶æœ‰ç¨‹åºå‘˜æƒ³å‡ºçš„ç¼“å­˜ç­–ç•¥ï¼Œæœ¬è´¨å°±æ˜¯ä¸€å—å­˜å‚¨é”®å€¼å¯¹çš„å†…å­˜ç©ºé—´ï¼Œæœ‰ä¸°å¯Œçš„ç»éªŒæ¥å†³ç­–å¦‚ä½•å¤„ç†æŸä¸ªé”®å€¼å¯¹ï¼Œèƒ½å¤Ÿåœ¨å¤§æµé‡çš„æƒ…å†µä¸‹å¸®æ•°æ®åº“æŠ—ä½å‹åŠ›</p>
<p>ï¼ˆä½†æ˜¯<!--more-->è¿™ä¸ªé¡¹ç›®çœŸçš„éœ€è¦æŠ—å‹å—ï¼Ÿ</p>
</blockquote>
<pre><code class="language-bash">$ pacman -S redis
</code></pre>
<h2>redis çš„ä½¿ç”¨</h2>
<pre><code class="language-bash"># å¯åŠ¨redisæœåŠ¡
$ sudo systemctl start redis
# å¼€æœºè‡ªå¯åŠ¨redisæœåŠ¡
$ sudo systemctl enable redis
# æŸ¥çœ‹redisçŠ¶æ€
$ systemctl status redis
# è¿›å…¥cliäº¤äº’æ¨¡å¼
$ redis-cli
# pingä¸€ä¸‹redisæœåŠ¡æ˜¯å¦å¯åŠ¨
&gt; ping
PONG
# è·å–æ‰€æœ‰é”®å
&gt; keys *
# è·å–é”®çš„å€¼
&gt; get keyname
value
</code></pre>
<h2>go-redis</h2>
<blockquote>
<p>go-redis æ˜¯ä¸€ä¸ªå¼€æºä¾èµ–ï¼Œç”¨äº golang å’Œ redis ä¹‹é—´çš„äº¤äº’</p>
</blockquote>
<p>ä¸‹é¢æ˜¯æœ€ç®€å•çš„ string å­˜å‚¨</p>
<pre><code class="language-go">package main

import (
    &quot;github.com/redis/go-redis/v9&quot;
    &quot;context&quot;
    &quot;fmt&quot;
)

var client *redis.Client
var ctx context.Context

func init() {
    ctx = context.Background()
    client = redis.NewClient(&amp;redis.Options{
        Addr: &quot;127.0.0.1:6379&quot;,
        Password: &quot;&quot;,
        DB: 0,
    })
}
func main() {
    a, err := client.Set(ctx, &quot;name&quot;, &quot;hello&quot;, 0).Result()
    if err != nil {
        fmt.Println(err)
    }
    fmt.Println(a)
}
</code></pre>
<p>æ¥çœ‹çœ‹ cli äº¤äº’ç»“æœ</p>
<pre><code class="language-bash">127.0.0.1:6379&gt; keys *
1) &quot;name&quot;
127.0.0.1:6379&gt; get name
&quot;hello&quot;
</code></pre>
<p>å®Œç¾ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å– string</p>
<pre><code class="language-go">func main() {
    //a, err := client.Set(ctx, &quot;name&quot;, &quot;hello&quot;, 0).Result()
    a, err := client.Get(ctx, &quot;name&quot;).Result()
    if err != nil {
        fmt.Println(err)
    }
    fmt.Println(a)
}
</code></pre>
<p>å‘½ä»¤è¡Œè¾“å‡ºäº† <code>hello</code></p>
<p>redis æœ‰äº”å¤§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ String, Hash, List, Set, Sorted Set</p>
<p>ä¸Šé¢åªè¯´äº† Stringï¼Œè‚¯å®šæ²¡æ³•æ»¡è¶³å¤§éƒ¨åˆ†æ—¥å¸¸éœ€æ±‚ï¼Œå¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„ç±»å‹å°±æ˜¯ Hashï¼Œä¸ String ä¸åŒï¼ŒHash çš„ key å¯¹åº”çš„ value æ˜¯ä¸€å¼  Hash è¡¨ï¼Œç›¸å½“äºç¬¬äºŒç»´åº¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ keyï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å­—æ®µï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯å¯¹åº”çš„value</p>
<pre><code class="language-go">func main() {
    a, err := client.HSet(ctx, &quot;int&quot;, &quot;hello&quot;, 233).Result()
    b, err := client.HGet(ctx, &quot;int&quot;, &quot;hello&quot;).Result()
    if err != nil {
        fmt.Println(err)
    }
    fmt.Println(a)
    fmt.Println(b)
}
</code></pre>
<p>æ²¡é”™ï¼Œä½ ä¸€å®šæƒ³åˆ°äº†è¿™æ · set å¤ªæ…¢äº†å¯¹å§ï¼Œgo-redis è¿˜æä¾›æ‰¹é‡ <code>HMSet</code> æ–¹æ³•æ‰¹é‡ setï¼Œå’Œèƒ½è·å–å…¨éƒ¨å…ƒç´ çš„ <code>HGetAll</code> æ–¹æ³•</p>
<pre><code class="language-bash">func main() {
    a, err := client.HMSet(ctx, &quot;bigDataBase&quot;, map[string]interface{}{
        &quot;name&quot;: &quot;hello&quot;,
        &quot;Password&quot;: &quot;password&quot;,
        &quot;luck&quot;: 8,
    }).Result()
    b, err := client.HGetAll(ctx, &quot;int&quot;).Result()
    if err != nil {
        fmt.Println(err)
    }
    fmt.Println(a)
    fmt.Println(b)
}
</code></pre>
<p>ä½†æ˜¯æ³¨æ„ï¼Œè¿”å›çš„æ˜¯ <code>map[string]string</code>ï¼Œæ‰€ä»¥å®é™…ä½¿ç”¨ä¸­å¯èƒ½è¿˜éœ€è¦å–å‡ºæ¥ä¹‹åè½¬æ¢ç±»å‹</p>
<blockquote>
<p>æˆ‘æ˜¯çœŸçš„ä¸æƒ³å­¦ä¸€å †å·¥å…·ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ä¸€å †ç¢ç‰‡ä¸€æ ·çš„ä¸œè¥¿æ¥æ„æˆé¡¹ç›®ï¼Œéå¸¸çš„ä¸ sucklessï¼Œå¦‚æœèƒ½åªå®Œæˆç®€å•çš„åŸºç¡€åŠŸèƒ½ä¹‹åä¸Šçº¿ä¹‹åæ…¢æ…¢æ”¹ä¸œè¥¿æ¥ä¼˜åŒ–è¿™ä¸ªç¨‹åºå¤šå¥½ï¼Œéè¦åœ¨ä¸€å¼€å§‹å°±åŠ å¤§åˆ«äººçš„å­¦ä¹ æˆæœ¬ï¼Œæˆ‘å¸Œæœ›çš„æ˜¯å­¦ç²¾ï¼Œè€Œä¸æ˜¯å­¦çš„æ‚å’Œå¹¿ï¼Œè¿™æ ·å›«å›µåæ£åœ°å­¦ä¹ ä¸€éæˆ‘è§‰å¾—æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œè™½ç„¶æœªæ¥ç¡®å®éœ€è¦æŒæ¡è¿™é—¨æŠ€æœ¯ï¼Œä½†æ˜¯ä¸æƒ³ç°é˜¶æ®µå»æŒæ¡ï¼</p>
<p>å¯èƒ½åªæ˜¯æˆ‘çš„æƒ³æ³•æ¯”è¾ƒä¸åŒï¼Œæˆ‘æ˜¯ä¸€ä¸ªå–œæ¬¢é€ è½®å­çš„äººï¼Œæœ‰äº›åŠŸèƒ½å¯ä»¥è‡ªå·±å®ç°å°±å¾ˆä¸æƒ³ä¾é åˆ«äººçš„è½®å­ï¼ŒçŸ¥é“åˆ«äººè½®å­çš„åŸç†æˆ‘ä¹Ÿæƒ³è‡ªå·±é€ é€ çœ‹ï¼Œåªèƒ½è¯´çŸ¥éŸ³éš¾å¯»ï¼Œå¼€æºç¤¾åŒºç¡®å®éƒ½æ˜¯å’Œæˆ‘å¿—åŒé“åˆçš„äººï¼Œä½†è‡ªå·±ç¡®å®ä¹Ÿæ²¡å­¦ä¼šä»€ä¹ˆçœŸæœ¬äº‹ï¼Œè®©åˆ«äººå°Šé‡ï¼Œæ— å¥ˆã€‚ç°åœ¨æ„Ÿè§‰åç«¯å…¶å®å°±æ˜¯ä¸ªæ‹§èºä¸çš„ï¼ŒæŒæ¡ä¸€å †å·¥å…·ä¹‹åï¼Œæ›´åŠ ç†Ÿç»ƒåœ°æ‹§èºä¸ï¼Œæœ‰è¶£ç¨‹åº¦å¯èƒ½è¿˜ä¸å¦‚å‰ç«¯ï¼ˆï¼Ÿ</p>
</blockquote>
<blockquote>
<p>ä¸è¿‡æˆ‘æ‰¿è®¤ï¼Œè‡ªå·±ç°åœ¨æ˜¯æŠŠç¼–ç¨‹å½“ä½œä¸€é—¨å…´è¶£ï¼Œä½†ä¸ºçš„æ˜¯ä»¥åçš„å·¥ä½œï¼Œå½“å…´è¶£æˆä¸ºå·¥ä½œæ—¶ï¼Œå¿…ç„¶ä¼šè®©äººæ²®ä¸§ï¼Œç°åœ¨è¿˜æ˜¯èµ°ä¸€æ­¥çœ‹ä¸€æ­¥å§ï¼Œæ— æ‰€è°“ï¼Œæˆ‘ä¼šå…¥é’³æ•™ ğŸ˜ˆ</p>
<p>æˆ‘åˆ°åº•æƒ³å¹²ä»€ä¹ˆå‘¢ï¼Œå¯èƒ½æ˜¯å†™æ¸¸æˆå§ï¼Œä½†æ˜¯ç›´è§‰å‘Šè¯‰æˆ‘ï¼Œç°åœ¨è¿˜æ²¡åˆ°é‚£ä¸ªæ—¶é—´</p>
</blockquote>
<blockquote>
<p>2.5 æ›´æ–°ï¼š</p>
<p>å…¶å®ä¹Ÿå°±é‚£æ ·å§ï¼Œèƒ½ç”¨èµ·æ¥ä¹‹åè¿˜æ˜¯æŒºå¼€å¿ƒçš„ï¼Œåˆä¸æ˜¯è®©æˆ‘å»å­¦åº•å±‚å®ç°ï¼Œæˆ‘åªéœ€è¦ä¼šç”¨ä»–ä»¬æä¾›ç»™æˆ‘çš„å‡½æ•°å°±è¡Œäº†ï¼Œç¼–ç¨‹å°±è¿™ä¹ˆå›äº‹ï¼Œè¦è¯´éš¾åº¦è‚¯å®šæ˜¯æ¯”ä¸ä¸Šç®—æ³•çš„ï¼Œå­¦æ–°ä¸œè¥¿æ²¡ä»€ä¹ˆéš¾çš„ï¼</p>
</blockquote>

<script src="/res/js/main.js" defer></script>
</body>
</html>